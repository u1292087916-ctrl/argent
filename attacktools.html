<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>SESSION_LOCKED</title>

<style>
html,body{
  margin:0; width:100%; height:100%;
  background:black; color:#00ff88;
  font-family:Consolas, monospace;
  overflow:hidden;
}

#terminal{
  padding:20px;
  font-size:15px;
  white-space:pre-wrap;
}

.cursor{
  display:inline-block;
  width:9px; height:18px;
  background:#00ff88;
  animation:blink .8s infinite;
}

@keyframes blink{50%{opacity:0}}

#barBox{
  width:90%; height:14px;
  border:1px solid #00ff88;
  margin:20px;
}

#bar{
  height:100%;
  width:0%;
  background:#00ff88;
}

.shake{
  animation:shake .15s infinite;
}

@keyframes shake{
  0%{transform:translate(0)}
  25%{transform:translate(var(--sx),var(--sy))}
  50%{transform:translate(calc(var(--sx)*-1),var(--sy))}
  75%{transform:translate(var(--sx),calc(var(--sy)*-1))}
}

.critical{
  color:#ff3333;
}

#overlay{
  position:fixed; inset:0;
  background:black;
  color:#00ff88;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
  cursor:pointer;
}
</style>
</head>
<body>

<div id="overlay">CLICK TO BEGIN SESSION</div>

<div id="terminal"></div><span class="cursor"></span>
<div id="barBox"><div id="bar"></div></div>

<script>
/* ===== AUDIO ===== */
let ctx, intensity=0;

function initAudio(){
  ctx=new (window.AudioContext||window.webkitAudioContext)();
}

function scream(){
  if(!ctx) return;
  const o=ctx.createOscillator();
  const g=ctx.createGain();

  const freq = 400 + intensity*120;
  const vol  = Math.min(0.02 + intensity*0.015, 0.35);

  o.type="sawtooth";
  o.frequency.value=freq;
  g.gain.value=vol;

  o.connect(g).connect(ctx.destination);
  o.start();
  o.stop(ctx.currentTime+0.12);
}

/* ===== TERMINAL ===== */
const term=document.getElementById("terminal");
const bar=document.getElementById("bar");

const lines=[
 "Booting secure instance...",
 "Loading kernel modules...",
 "Establishing session link...",
 "Synchronizing data...",
 "Verifying integrity...",
 "WARNING: sync instability detected"
];

let i=0, progress=0;

function write(){
  if(i<lines.length){
    term.innerHTML+=lines[i]+"\n";
    progress+=Math.random()*15;
    if(progress>87) progress=87;
    bar.style.width=progress+"%";
    i++;
    setTimeout(write,400);
  }else critical();
}

function critical(){
  term.innerHTML+="\n⚠ CRITICAL FAILURE ⚠\n";
  term.classList.add("critical");
  document.body.classList.add("shake");

  setInterval(()=>{
    intensity++;
    scream();

    const amp=Math.min(intensity*0.6,12);
    document.body.style.setProperty("--sx",amp+"px");
    document.body.style.setProperty("--sy",amp+"px");

    term.innerHTML+="DESYNC LEVEL "+intensity+"%\n";
    bar.style.width="87%";

    forceFullscreen();
    term.scrollTop=term.scrollHeight;
  },700);
}

/* ===== FULLSCREEN FORCE ===== */
function forceFullscreen(){
  if(!document.fullscreenElement){
    document.documentElement.requestFullscreen?.();
  }
}

/* ===== INPUT BLOCK ===== */
document.addEventListener("keydown",e=>{
  if(
    e.key==="F11" ||
    e.key==="Escape" ||
    (e.altKey && e.key==="F4")
  ){
    e.preventDefault();
    forceFullscreen();
  }

  if(e.ctrlKey && e.shiftKey && e.key==="Q"){
    document.exitFullscreen?.();
    location.href="about:blank";
  }
});

document.addEventListener("contextmenu",e=>e.preventDefault());

/* ===== START ===== */
document.getElementById("overlay").onclick=()=>{
  initAudio();
  document.getElementById("overlay").remove();
  forceFullscreen();
  write();
};
</script>
</body>
</html>

